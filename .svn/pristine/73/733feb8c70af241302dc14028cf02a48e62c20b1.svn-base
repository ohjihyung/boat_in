<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>



<div id="projectHomeDiv" class="row">
	<div class="col-12">
		<div class="page-title-box">
			<h4 class="page-title">project home</h4>
			<div>
				<ul class="breadcrumb ">
					<li class="breadcrumb-item"><button id="createPdf" type="button" class="btn btn-purple waves-effect waves-light" onclick="createPdf()">ì¸ì‡„</button></li>
					<li class="breadcrumb-item"><button id="testBtn" type="button" class="btn btn-warning waves-effect waves-light">ê°’í™•ì¸ë²„íŠ¼</button></li>

				</ul>
			</div>
		</div>
	</div>
</div>
<!-- end page title -->


<div class="row">
	<div class="col-12">
		<div class="row">
			<div class="col-lg-12">
				<div class="card mb-3">
					<div class="row g-0">
						<div class="col-md-12">
							<div class="card-body">
								<h4 class="header-title mb-3">
									Team Members <i class="mdi mdi-account-multiple ms-1"></i>
								</h4>

								<div class="row " id="profileList" style="display: flex;">
									<div class="col-sm-4 col-xl-2 mb-2" style="display: flex;">
										<!-- í”„ë¡œì íŠ¸ íŒ€ì› ì´ˆëŒ€í•˜ê¸° -->
										<div style="position: relative;">
											<a href="javascript:voic(0)" id="inviteProMem" onclick="inviteProMem()" style="border: none; background-color: white;"> <img src="/assets/images/plus2.png" class="rounded-circle avatar-md img-thumbnail bg-transparent" alt="">
											</a>

										</div>
										<div class="ms-1 align-middle">
											<a href="javascript:voic(0)" onclick="inviteProMem()">
												<h5 class="align-middle mt-3" id="inviteText">íŒ€ì› ì´ˆëŒ€í•˜ê¸°</h5>
											</a>
										</div>
									</div>
								</div>
								<!-- row -->
								<div class="row">
									<button id="noJoinMember" onclick="doDisplayNoneJoinMember_B()" class="btn btn-white" style="border: none;">
										<h4 id="noJoinMemberText" class="header-title mt-2">ì°¸ê°€ ë¯¸ìŠ¹ì¸ íŒ€ì› ğŸ”½</h4>
									</button>
								</div>
								<div class="row g-0 list-group list-group-horizontal justify-content-center" id="NoneJoinMember_jy" style="display: none">
									<div class="col-md-12">
										<div class="card-body">
											<div class="row " id="noJoinMemberList" style="display: flex;"></div>
										</div>
									</div>
								</div>
								<div class="row">
									<button id="readyConfirmWork" onclick="readyConfirmWork()" class="btn btn-white" style="border: none; display:none;">
										<h4 id="readyConfirmWorkText" class="header-title mt-2">ìŠ¹ì¸ëŒ€ê¸° ì‘ì—… ëª©ë¡ğŸ”½</h4>
									</button>
								</div>
								<div class="row g-0 list-group list-group-horizontal justify-content-center" id="readyConfirmWorkDiv" style="display: none">
									<div class="col-md-12">
										<div class="card-body">
											<div class="row " id="readyConfirmWorkList" style="display: flex;">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- row  -->
				</div>
			</div>
		</div>
	</div>
</div>


<div class="row">
	<div class="col-md-6 col-xl-3">
		<div class="widget-rounded-circle card bg-purple shadow">
			<div class="card-body">
				<div class="row">
					<div class="col-6">
						<div class="avatar-lg rounded-circle bg-soft-light">
							<i class="fe-check-circle font-28 avatar-title text-white"></i>
						</div>
					</div>
					<div class="col-6">
						<div class="text-end">
							<p class="text-white mb-0 text-truncate">ì™„ë£Œëœì‘ì—…</p>
							<h2 class="text-white mt-2">
								<span id="completeQuantiCnt" data-plugin="counterup"> </span>
							</h2>
						</div>
					</div>
				</div>
				<!-- end row-->
			</div>
		</div>
		<!-- end widget-rounded-circle-->
	</div>
	<!-- end col-->

	<div class="col-md-6 col-xl-3">
		<div class="widget-rounded-circle card bg-info shadow-none">
			<div class="card-body">
				<div class="row">
					<div class="col-6">
						<div class="avatar-lg rounded-circle bg-soft-light">
							<i class="fe-chevrons-right font-28 avatar-title text-white"></i>
						</div>
					</div>
					<div class="col-6">
						<div class="text-end">
							<p class="text-white mb-0 text-truncate">ì§„í–‰ì¤‘ ì‘ì—…</p>
							<h2 class="text-white mt-2">
								<span id="goingQuantiCnt" data-plugin="counterup"> </span>
							</h2>
						</div>
					</div>
				</div>
				<!-- end row-->
			</div>
		</div>
		<!-- end widget-rounded-circle-->
	</div>
	<!-- end col ëŒ€ê¸°ì¤‘ì¸ ì‘ì—…. í•„ìš”ì—†ëŠ”ê±°ê°™ì•„ì„œ -->
	<!-- 				<div class="col-md-6 col-xl-3"> -->
	<!-- 					<div class="widget-rounded-circle card bg-info shadow-none"> -->
	<!-- 						<div class="card-body"> -->
	<!-- 							<div class="row"> -->
	<!-- 								<div class="col-6"> -->
	<!-- 									<div class="avatar-lg rounded-circle bg-soft-light"> -->
	<!-- 										<i class="fe-users font-28 avatar-title text-white"></i> -->
	<!-- 									</div> -->
	<!-- 								</div> -->
	<!-- 								<div class="col-6"> -->
	<!-- 									<div class="text-end"> -->
	<!-- 										<p class="text-white mb-0 text-truncate">ëŒ€ê¸°ì¤‘ì¸ ì‘ì—…</p> -->
	<!-- 										<h2 class="text-white mt-2"> -->
	<!-- 											<span id="readyQuantiCnt" data-plugin="counterup"> </span> -->
	<!-- 										</h2> -->
	<!-- 									</div> -->
	<!-- 								</div> -->
	<!-- 							</div> -->
	<!-- 							end row -->
	<!-- 						</div> -->
	<!-- 					</div> -->
	<!-- 					end widget-rounded-circle -->
	<!-- 				</div> -->
	<!-- 				end col -->

	<div class="col-md-6 col-xl-3">
		<div class="widget-rounded-circle card bg-pink shadow-none">
			<div class="card-body">
				<div class="row">
					<div class="col-6">
						<div class="avatar-lg rounded-circle bg-soft-light">
							<i class="fe-alert-triangle font-28 avatar-title text-white"></i>
						</div>
					</div>
					<div class="col-6">
						<div class="text-end">
							<p class="text-white mb-0 text-truncate">ë§ˆê°ì¼ì´ ì§€ë‚œì‘ì—…</p>
							<h2 class="text-white mt-2">
								<span id="deadWorkCnt" data-plugin="counterup"></span>
							</h2>
						</div>
					</div>
				</div>
				<!-- end row-->
			</div>
		</div>
		<!-- end widget-rounded-circle-->
	</div>
	<!-- end col-->

	<div class="col-md-6 col-xl-3">
		<div class="widget-rounded-circle card bg-success shadow-none">
			<div class="card-body">
				<div class="row">
					<div class="col-6">
						<div class="avatar-lg rounded-circle bg-soft-light">
							<i class="fe-aperture font-28 avatar-title text-white"></i>
						</div>
					</div>
					<div class="col-6">
						<div class="text-end">
							<p class="text-white mb-0 text-truncate">ì´ì‘ì—…</p>
							<h2 class="text-white mt-2">
								<span id="proQuantiTotalCnt" data-plugin="counterup"></span>
							</h2>
						</div>
					</div>
				</div>
				<!-- end row-->
			</div>
		</div>
		<!-- end widget-rounded-circle-->
	</div>
	<!-- end col-->
</div>
<!-- end row-->
<div class="row">
	<div class="col-xl-6">
		<!-- Portlet card -->
		<div class="card" style="height: 450px;">
			<div class="card-body">
				<div class="card-widgets">
					<a href="javascript: void(0);" data-toggle="reload"><i class="mdi mdi-refresh"></i></a> <a data-bs-toggle="collapse" href="#cardCollpase3" role="button" aria-expanded="false" aria-controls="cardCollpase3"><i class="mdi mdi-minus"></i></a> <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close"></i></a>
				</div>
				<h4 class="header-title mb-0">ì‘ì—…ë³„ ì§„í–‰ë„</h4>

				<div id="cardCollpase3" class="collapse pt-3 show" dir="ltr">
					<div id="totalWorkRate" class="apex-charts" data-colors="#f06292"></div>
				</div>
				<!-- collapsed end -->
			</div>
			<!-- end card-body -->
		</div>
		<!-- end card-->
	</div>
	<!-- end col-->

	<!-- ë§ˆê°ì¼ì„ë°•,ìµœê·¼ë°°ì •  -->
	<div class="col-xl-6">
		<div class="card" style="height: 450px;">
			<div class="card-body">
				<ul class="nav nav-pills navtab-bg nav-justified">
					<li class="nav-item"><a href="#deadlineWork" data-bs-toggle="tab" aria-expanded="false" class="nav-link active"> ë§ˆê°ì¼ ì„ë°•í•œ ì‘ì—… </a></li>
					<li class="nav-item"><a href="#newRegiWork" data-bs-toggle="tab" aria-expanded="true" class="nav-link "> ìµœê·¼ ë°°ì •ëœ ì‘ì—… </a></li>
				</ul>
				<div class="tab-content">

					<div class="tab-pane show active" id="deadlineWork">
						<div class="">
							<table class="table table-hover table-centered mb-0" id="deadlineWorkList">
								<thead>
									<tr>
										<th style="width: 100px;">ì‘ì—…ì´ë¦„</th>
										<th>ì§„í–‰ë„</th>
										<th>ì‹œì‘ì¼</th>
										<th>ì¢…ë£Œì¼</th>
										<th>ë‹´ë‹¹ì</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
					<div class="tab-pane show " id="newRegiWork">
						<div class="table-responsive">
							<table class="table table-hover table-centered mb-0" id="newRegiWorkList">
								<thead>
									<tr>
										<th>ì‘ì—…ë²ˆí˜¸</th>
										<th>ì‘ì—…ì´ë¦„</th>
										<th>ì§„í–‰ìƒíƒœ</th>
										<th>ì§„í–‰ë„</th>
										<th>ì¢…ë£Œì¼</th>
										<th>ë‹´ë‹¹ì</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- end card-->
	</div>
	<!-- end col -->

</div>
<!-- end row -->


<div class="row">
	<!--íŒ€ì›ë³„ í• ë‹¹ëœ ì‘ì—…ëŸ‰-->
	<div class="col-xl-5">
		<div class="card">
			<div class="card-body">
				<div class="card-widgets">
					<a href="javascript: void(0);" data-toggle="reload"><i class="mdi mdi-refresh"></i></a> <a data-bs-toggle="collapse" href="#cardCollpase5" role="button" aria-expanded="false" aria-controls="cardCollpase5"><i class="mdi mdi-minus"></i></a> <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close"></i></a>
				</div>
				<h4 class="header-title mb-0">íŒ€ì›ë³„ í• ë‹¹ëœ ì‘ì—…ëŸ‰</h4>
				<div id="cardCollpase5" class="collapse pt-3 show" dir="ltr">
					<div id="myWorkCntChart" class="apex-charts" data-colors="#348cd4,#f06292,#ced4da"></div>
				</div>
				<!-- collapsed end -->
			</div>
			<!-- end card-body -->
		</div>
		<!-- end card-->
	</div>
	<!-- end col-->

	<!-- íŒ€ì›ë³„ ì „ì²´ ì§„í–‰ë„ -->
	<div class="col-xl-4">
		<div class="card">
			<div class="card-body">
				<div class="card-widgets">
					<a href="javascript: void(0);" data-toggle="reload"><i class="mdi mdi-refresh"></i></a> <a data-bs-toggle="collapse" href="#cardCollpase5" role="button" aria-expanded="false" aria-controls="cardCollpase5"><i class="mdi mdi-minus"></i></a> <a href="javascript: void(0);" data-toggle="remove"><i class="mdi mdi-close"></i></a>
				</div>
				<h4 class="header-title mb-0">íŒ€ì›ë³„ ì „ì²´ ì§„í–‰ë„</h4>

				<div id="myWorkRateChart" class="collapse pt-3 show" dir="ltr">
					<div id="apex-column-1" class="apex-charts" data-colors="#348cd4,#f06292,#ced4da"></div>
				</div>
				<!-- collapsed end -->
			</div>
			<!-- end card-body -->
		</div>
		<!-- end card-->
	</div>
	<!-- end col-->

	<!--ìµœê·¼ì—…ë°ì´íŠ¸ ì‘ì—…(ë¡œê·¸ ) -->
	<div class="col-xl-3 col-md-6">
		<div class="card">
			<div class="card-body">
				<div class="dropdown float-end">
					<a href="#" class="dropdown-toggle arrow-none card-drop" data-bs-toggle="dropdown" aria-expanded="false"> <i class="mdi mdi-dots-vertical"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-end">
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Sales Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Export Report</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Profit</a>
						<!-- item-->
						<a href="javascript:void(0);" class="dropdown-item">Action</a>
					</div>
				</div>

				<h4 class="header-title mb-3">ìµœê·¼ ì—…ë°ì´íŠ¸ ì‘ì—… (ë¡œê·¸)</h4>
				<div class="align-items-center border-bottom border-light pb-2 mb-1">
					<h3 class="float-end my-2 py-1">45K</h3>
					<div class="d-flex align-items-center">
						<div class="avatar-md rounded-circle bg-soft-info">
							<i class="mdi mdi-sale font-26 avatar-title text-info"></i>
						</div>

						<div class="ms-2">
							<h5 class="mb-1 mt-0 fw-bold">Total Sales</h5>
							<p class="text-muted mb-0">New Sale 20.5k</p>
						</div>
					</div>
				</div>
				<div class="align-items-center border-bottom border-light py-2 my-1">
					<h3 class="float-end my-2 py-1">13K</h3>
					<div class="d-flex align-items-center">
						<div class="avatar-md rounded-circle bg-soft-warning">
							<i class="mdi mdi-autorenew font-26 avatar-title text-warning"></i>
						</div>

						<div class="ms-2">
							<h5 class="mb-1 mt-0 fw-bold">Product Cost</h5>
							<p class="text-muted mb-0">Total Cost 12.3k</p>
						</div>
					</div>
				</div>
				<div class="align-items-center border-bottom border-light py-2 my-1">
					<h3 class="float-end my-2 py-1">16M</h3>
					<div class="d-flex align-items-center">
						<div class="avatar-md rounded-circle bg-soft-pink">
							<i class="mdi mdi-emoticon-happy-outline font-26 avatar-title text-pink"></i>
						</div>

						<div class="ms-2">
							<h5 class="mb-1 mt-0 fw-bold">Satisfaction Users</h5>
							<p class="text-muted mb-0">Total Users 26M</p>
						</div>
					</div>
				</div>
				<div class="align-items-center pt-2 mt-1">
					<h3 class="float-end my-2 py-1">75K</h3>
					<div class="d-flex align-items-center">
						<div class="avatar-md rounded-circle bg-soft-dark">
							<i class="mdi mdi-cash-multiple font-26 avatar-title text-dark"></i>
						</div>

						<div class="ms-2">
							<h5 class="mb-1 mt-0 fw-bold">Product Income</h5>
							<p class="text-muted mb-0">Income 65.4k</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>


</div>
<!-- end row -->






<!-- teamMembers ì¶œë ¥ ì¹´ë“œë! -->



<!-- íŒ€ë©¤ë²„ ë¦¬ìŠ¤íŠ¸-->
<script type="text/javascript">
//ê°’í™•ì¸ìš© textbtn 

$(function(){
	
	var proJSVO  = {
			proNo : proNo
	} 
	proJoinMemberList_H(proJSVO)
	
})
//ê°‘í™•ì¸ ìš© 
$('#testBtn').on('click',function(){
	var topworkVO  = {
			proNo : proNo
	} 
})

// ì°¸ì—¬ë©¤ë²„ ë¦¬ìŠ¤íŠ¸ ì¶”ê°€ 
function proJoinMemberList_H(proJSVO){
	
	$.ajax({
		url : "/project/homeMemberList",
		type : "post",
		data : JSON.stringify(proJSVO),
		contentType : 'application/json; charset=utf-8',
		dataType : 'json',
		success : function(res) {
			console.log("ì°¸ì—¬ë©¤ë²„ë¦¬ìŠ¤íŠ¸ : ",res)
			memberId = localStorage.getItem('id')
			var str ="";
			var myAuth = "" ;
			for (var i = 0; i < res.length; i++) {
				if (	memberId == res[i].memberId ) {
					var myId= memberId;
					myAuth = res[i].proAuth
					console.log("myId :: ",myId)
					console.log("myAuth :: ",myAuth)
				}
				str = 
					`<div class="col-sm-4 col-xl-2" style="display: flex;">
						<div style="position: relative;">
							<img id ="memberImg\${i}" src="\${res[i].memberPic}" class="rounded-circle avatar-md img-thumbnail bg-transparent" alt=""> 
							<i id = "memberState\${i}" class="mdi mdi-circle h3 text-secondary" style="position: absolute; top: 30px; left: 40px"\></i>
						</div>
						<div class="ms-2">
							<h5 class="mb-1" id="memberName\${i}" >
							\${res[i].memberName} 
							<i id ="memberAuth\${i}"></i>
							</h5>
							<p id  ="memberAuthName\${i}"></p>
						</div>
						<div class="mt-2 dropend">
							<a   href="#" onclick="" class="dropdown-toggle"id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" > <i class="mdi mdi-chevron-right h2"></i>
							</a>
							<div id="dropMenu\${i}"class="dropdown-menu mb-4 dropMenu" aria-labelledby="dropdownMenuButton">
	                        <a class="dropdown-item" href="#">ìª½ì§€ë³´ë‚´ê¸°</a>
	                        <a class="dropdown-item" href="#">ì±„íŒ…í•˜ê¸°</a>
	                   		</div>
						</div>
					</div>`
					/*  í”„ë¡œí•„ ë‚´ìš© ë */
                   	
				//ì°¸ê°€í˜„í™©ì— ë”°ë¼ì„œ 	
				if (res[i].proJoinState == '1') {
					$('#profileList').append(str)
				}else if (res[i].proJoinState == '0') {
					$('#noJoinMemberList').append(str)
				}
				
				//ì ‘ì† ë¹„ì ‘ì† ìƒíƒœ ì²´í¬	
				var memberStateId = '#memberState'+i
				var memberState = res[i].memberState
				 if (memberState == '0' || memberState== '1'|| memberState== '2') {
				     $(memberStateId).attr('class','mdi mdi-circle h3 text-success');
				   } else if (res[i].memberState == "3" ) {
				     $(memberStateId).attr('class',"mdi mdi-circle h3 text-warning")
				   }else if (res[i].memberState == "4" ) {
				     $(memberStateId).attr('class',"mdi mdi-circle h3 text-secondary")
				   } 
					
				//PM PL ìƒíƒœì²´í¬  1PM 2PL 3member
				var memberAuth = '#memberAuth'+i
				var memberAuthName = '#memberAuthName'+i
				 if(res[i].proAuth == '1'){
					 $(memberAuth).attr('class','mdi mdi-check-decagram text-danger ms-1');
					 $(memberAuthName).text('PM')
                  }else if(res[i].proAuth == '2'){
					 $(memberAuth).attr('class','mdi mdi-check-decagram text-primary ms-1');
					 $(memberAuthName).text('PL')
                  }else if(res[i].proAuth == '3'){
					 $(memberAuthName).text('MEMBER')
                  }	
					
// 				//ê¸°ë³¸ì´ë¯¸ì§€ ì‚¬ì§„
				var memberImg = '#memberImg'+i
				 if(res[i].memberPic == '0'){
					 $(memberImg).attr('src','/resources/dist/assets/images/users/blank_progile.png');
                  }
				 //ë‚˜ì˜ê¶Œí•œì´ PM ì´ë¼ë©´ ê¶Œí•œë¶€ì—¬ì™€ ì¶”ë°©í•˜ê¸° ì¶”ê°€
				var dropMenuListPM = `<div class="dropdown-divider"></div>
	                <a class="dropdown-item" href="#" onclick="selectAuth('\${res[i].memberId}')">ê¶Œí•œë³€ê²½</a>
	               	<a class="dropdown-item" href="#" onclick="firePro('\${res[i].memberId}')">ì¶”ë°©í•˜ê¸°</a>`;
	               	var dropMenu = '#dropMenu'+i
	               	if (myAuth =="1") {
		                $(dropMenu).append(dropMenuListPM)
		                
	               	}
			}//forë¬¸
			

            
        	if (myAuth =="1") {
                //ìŠ¹ì¸ëŒ€ê¸° ì‘ì—…ëª©ë¡ ì¶”ê°€í•´ì£¼ê¸°
                $('#readyConfirmWork').css('display','block');
                //ìŠ¹ì¸ëŒ€ê¸° ì‘ì—…ëª©ë¡ ë³´ì—¬ì£¼ê¸°
                readyConfirmWorkList()
              
			}
		},

	});//ajax
}

//ì°¸ê°€ìŠ¹ì¸ ë¯¸ì™„ë£Œ íšŒì› ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ë˜ëŠ” div ê´€ë ¨ í•¨ìˆ˜
var divNoneJoinMember_jy = $("#NoneJoinMember_jy");

function doDisplayNoneJoinMember_B(){    
   if(divNoneJoinMember_jy.css("display") == "none"){
      divNoneJoinMember_jy.show();
      $('#noJoinMemberText').text('ì°¸ê°€ ë¯¸ìŠ¹ì¸ íŒ€ì› ğŸ”¼   ')
   }else{
      divNoneJoinMember_jy.hide();
      $('#noJoinMemberText').text('ì°¸ê°€ ë¯¸ìŠ¹ì¸ íŒ€ì› ğŸ”½')
   }
}
   

//ì°¸ê°€ìŠ¹ì¸ ë¯¸ì™„ë£Œ íšŒì› ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ë˜ëŠ” div í´ë¦­ ì‹œ div ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” í•¨ìˆ˜
function divCloseNoneJoinMember_B(){
   $("#NoneJoinMember_jy").on("click", function(){
      divNoneJoinMember_jy.hide();
   });
}

//ìŠ¹ì¸ëŒ€ê¸°ì‘ì—… ëª©ë¡ í¼ì¹˜ê¸°    
function readyConfirmWork(){
	if($('#readyConfirmWorkDiv').css('display') =="none"){
		$('#readyConfirmWorkDiv').show()
		$("#readyConfirmWorkText").text("ìŠ¹ì¸ëŒ€ê¸° ì‘ì—… ëª©ë¡ğŸ”¼") 
	}else{
		$('#readyConfirmWorkDiv').hide()
		$("#readyConfirmWorkText").text("ìŠ¹ì¸ëŒ€ê¸° ì‘ì—… ëª©ë¡ğŸ”½") 
	}
}


//ì‘ì—… ìŠ¹ì¸ëŒ€ê¸° ëª©ë¡ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
function readyConfirmWorkList(){
	//í•´ë‹¹ì‘ì—…ë²ˆí˜¸ì˜  topwork vo ê°€ì ¸ì™€ì„œ state ì‘ì—…ìŠ¹ì¸ëŒ€ê¸° ì¡°ê±´ì—ë§ëŠ”ê²ƒë§Œ 
	var topworkVO = {
			proNo : proNo
	}
	
	$.ajax({
		url : "/proquanti/readyconfirmworklist",
		type : "post",
		data : JSON.stringify(topworkVO),
		contentType : 'application/json; charset=utf-8',
		dataType : 'json',
		success : function(res) {
			console.log("ì‘ì—…ëŒ€ê¸° ëª©ë¡ : ", res)
			var readyConfirmWorkListHtml ="";
            for (var i = 0; i < res.length; i++) {
            	 //ë©¤ë²„ì´ë¦„ í˜¹ì‹œëª¨ë¥´ë‹ˆê¹Œ getMemberDetail(res[i].memberId) detailTopWork_K(topWorkNo, subWorkNo, change)
            	readyConfirmWorkListHtml +=
//             		`<div class="col-2">
// 		                <div class="card">
// 		                    <div class="card-header bg-success">
// 		                        <h5 class="card-title text-white mb-0"> ì‘ì—…ëª… : \${res[i].topWorkTitle}</h5>
// 		                        <p class="text-white-50 mb-0">ë‹´ë‹¹ì : \${getMemberDetail(res[i].memberId)}</p>
// 		                    </div>
// 		                    <div class="card-body">
// 		                        <p class="mb-0"> \${res[i].topWorkContent}</p>
// 		                    </div>
// 		                </div>
// 		            </div>`
            		
            		`<div class ="col-2">
            		<button class ="btn btn-success rounded-pill waves-effect waves-light btn-xs" onclick="detailTopWork_K(\${res[i].topWorkNo})" > 
            		 ì‘ì—…ëª…  : \${res[i].topWorkTitle} <br>
            		ë‹´ë‹¹ì : \${getMemberDetail(res[i].memberId)}
            		</button>
            		</div>
            		`
			}
         	$('#readyConfirmWorkList').append(readyConfirmWorkListHtml)
			
		},

	});//ajax
}

//ê¶Œí•œë¶€ì—¬ ê¶Œí•œ ì„ íƒí•¨ìˆ˜ 
async function selectAuth(memberId){
	console.log("íŒŒë¼ë¯¸í„° ì˜ë“¤ì˜¹ëƒ : ", memberId)
	//"1: PM 2: PL 3: MEMBER ê¸°ë³¸ê°’ ì´ˆëŒ€ì‹œ 3 "
// 	var proAuth ="";
	const { value: proAuth } = await Swal.fire({
		  title: 'ë³€ê²½í•  ê¶Œí•œì„ ì„ íƒí•´ì£¼ì„¸ìš”',
		  input: 'select',
		  inputOptions: {
		    '1': 'PM',
		    '2': 'PL',
		    '3' :'MEMBER',
		  },
		  inputPlaceholder: 'ë³€ê²½í•  ê¶Œí•œì„ ì„ íƒí•´ì£¼ì„¸ìš”',
		  showCancelButton: true,
		})
		if (proAuth) {
			var projoinVO = {
					memberId : memberId,
					proNo : proNo,
					proAuth : proAuth 
				}
				console.log("ê°ì²´ê°’ ë³´ì : ",projoinVO)
				//ê¶Œí•œë¶€ì—¬ ë°ì´í„°ì—…ë°ì´íŠ¸
				modifyAuth(projoinVO)
		}
}

//ê¶Œí•œë¶€ì—¬ í•¨ìˆ˜ 
function modifyAuth(projoinVO){
	// PROJECT_JOIN_STATE PRO_AUTH ì—…ë°ì´íŠ¸ë¬¸ where = memberId  ì¡°ê±´  1: PM 2: PL 3: MEMBER ì„ íƒí•´ì„œ íŒŒë¼ë¯¸í„° ë„˜ê²¨ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ ì—…ë°ì´íŠ¸
	$.ajax({
		url : "/proquanti/modifyauth",
		type : "post",
		data : JSON.stringify(projoinVO),
		contentType : 'application/json; charset=utf-8',
		dataType : 'text',
		success : function(res) {
			console.log("ê¶Œí•œë³€ê²½ ë°˜í™˜ê°’ :",res)
			Swal.fire("ë³€ê²½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.")
			pageTap('home')
		},

	});//ajax
}
//ì¶”ë°©í•˜ê¸° í•¨ìˆ˜ 
function firePro(memberId){
	// PROJECT_JOIN_STATE PRO_JOINSTATE ì—…ë°ì´íŠ¸ë¬¸ where = memberId 0ìœ¼ë¡œ ë°”ê¾¸ê¸°
	var projoinVO = {
					memberId : memberId,
					proNo : proNo,
					proJoinState : '2' 
				}
	console.log("firePro : ",projoinVO)
	const swalWithBootstrapButtons = Swal.mixin({
	  customClass: {
	    confirmButton: 'btn btn-danger waves-effect waves-light',
	    cancelButton: 'btn btn-success waves-effect waves-light'
	  },
	  buttonsStyling: true
	})
	
	swalWithBootstrapButtons.fire({
	  title: 'í”„ë¡œì íŠ¸ì—ì„œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
	  text: "í•´ë‹¹íŒ€ì›ì„ í”„ë¡œì íŠ¸ì—ì„œ ì œì™¸í•©ë‹ˆë‹¤.",
	  icon: 'warning',
	  showCancelButton: true,
	  confirmButtonText: 'í™•ì¸',
	  cancelButtonText: 'ì·¨ì†Œí•˜ê¸°',
	  reverseButtons: true
	}).then((result) => {
	  if (result.isConfirmed) {
		  //ì°¸ì—¬ìƒíƒœê°’ 0ìœ¼ë¡œ ì´ˆê¸°í™” 
		  fireConfirm(projoinVO)
	    swalWithBootstrapButtons.fire(
	      'Deleted!',
	      'Your file has been deleted.',
	      'success'
	    )
	   
	  } else if (
	    /* Read more about handling dismissals below */
	    result.dismiss === Swal.DismissReason.cancel
	  ) {
	    swalWithBootstrapButtons.fire(
	      'Cancelled',
	      'Your imaginary file is safe :)',
	      'error'
	    )
	  }
	})
}

function fireConfirm(projoinVO){
	$.ajax({
		url : "/proquanti/firepro",
		type : "post",
		data : JSON.stringify(projoinVO),
		contentType : 'application/json; charset=utf-8',
		dataType : 'text',
		success : function(res) {
			console.log("ì¶”ë°©ì™„ë£Œ :",res)
			pageTap('home')
		},

	});//ajax
	
}

</script>

<!--  í”„ë¡œì íŠ¸ íŒ€ì› ì´ˆëŒ€í•˜ê¸° -->
<script type="text/javascript">
        
async function inviteProMem(){
   
   var { value: email } = await Swal.fire({
        title: 'íŒ€ì› ì´ˆëŒ€í•˜ê¸°',
        input: 'email',
        inputLabel: 'íŒ€ì›ì˜ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.',
        inputPlaceholder: 'ex)ddit404@naver.com',
        //textìš© ê°’ë„£ì–´ë‘ê¸°
      })
         console.log(email)
      if (email) {
        Swal.fire(`ì´ˆëŒ€ì´ë©”ì¼ì„ ì „ì†¡í–ˆìŠµë‹ˆë‹¤. <br>ì´ë©”ì¼ì£¼ì†Œ: \${email}`)
      }
   
   var data_H= {
         memberId : email,
         proNo : proNo,
   }
   
    $.ajax({
      type : "post",
      url: "${webPath}/projoin/inviteProMem",
      data: JSON.stringify(data_H),
      contentType :"application/json; charset=utf-8",
      dataType: 'text',
      success:function(res){
         console.log(res)
         if (res=='OK') {
            const Toast = Swal.mixin({
                 toast: true,
                 position: 'top-end',
                 showConfirmButton: false,
                 timer: 3000,
                 timerProgressBar: true,
                 didOpen: (toast) => {
                   toast.addEventListener('mouseenter', Swal.stopTimer)
                   toast.addEventListener('mouseleave', Swal.resumeTimer)
                 }
               })

               Toast.fire({
                 icon: 'success',
                 title: "ë©”ì¼ì „ì†¡ì„ ì„±ê³µí•˜ì˜€ìŠµë‹ˆë‹¤. \n ë©”ì¼í™•ì¸ì„ ìš”ì²­í•˜ì„¸ìš”."
               })
               pageTap('home')
         }
         if (res =='already') {
            Swal.fire('ì´ë¯¸ ì°¸ê°€ëœ íšŒì›ì…ë‹ˆë‹¤. ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš” ')
         }
         if (res =='no') {
            Swal.fire('ì•Œìˆ˜ ì—†ëŠ” ì´ìœ ë¡œ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.')
         }
         if (res =='fire') {
        	 Swal.fire({
        		  title: 'íŒ€ì›ì—ì„œ ì œì™¸ëœ íšŒì›ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì°¸ì—¬ì‹œí‚¤ì‹œê² ìŠµë‹ˆê¹Œ?',
        		  text: "ìƒˆë¡œìš´ ì¸ì¦ì—†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
        		  icon: 'warning',
        		  showCancelButton: true,
        		  confirmButtonColor: '#3085d6',
        		  cancelButtonColor: '#d33',
        		  confirmButtonText: 'YES'
        		}).then((result) => {
        		  if (result.isConfirmed) {
        			  //data_h ì—ëŠ” memberId, proNo ë“¤ì–´ê°€ìˆìŒ
        			  var proJoinVO ={
        					  memberId : email,
        				      proNo : proNo,
        				      proJoinState : '1' 
        			  }
        			  updateJoinState(proJoinVO)
        		    Swal.fire(
        		      'ì°¸ì—¬ì™„ë£Œ',
        		      'ì œì™¸ëœ íŒ€ì›ì´ ë‹¤ì‹œ ì°¸ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤.',
        		      'success'
        		    )
        		 	
        		  }
        		})
         }
      }
   }) 

}

//ì°¸ì—¬ìƒíƒœë³€ê²½  íŒŒë¼ë¯¸í„° ì•„ì´ë”” í”„ì ë²ˆí˜¸  
function updateJoinState(proJoinVO){
	$.ajax({
		url : "/projoin/updatejoinstate",
		type : "post",
		data : JSON.stringify(proJoinVO),
		contentType : 'application/json; charset=utf-8',
		dataType : 'json',
		success : function(res) {
			console.log(res)
			pageTap('home')
		},

	});//ajax
}

</script>

<!------ í”„ë¡œì íŠ¸ í†µê³„   ------>

<script type="text/javascript">
//í…ŒìŠ¤íŠ¸ìš© ì „ì—­ë³€ìˆ˜ í™ˆì— í•©ì³ì§€ë©´ ë³€ê²½í• ê²ƒ
var topworkVO = {
	proNo : proNo
}
//ì‹œì‘í•˜ìë§ˆì ì¶œë ¥í• ê²ƒë“¤
$(function() {
	totalWorkRate(topworkVO)
	totalCnt(topworkVO);
	printStateCnt();
	deadWorkCnt(topworkVO)
	myWorkCnt(topworkVO)
	myWorkRate(topworkVO);
	deadlineWorkList(topworkVO)
	newRegiWorkList(topworkVO)
})

	//pdfë§Œë“¤ê¸°
	$('#createPdf').on('click', function() {
		$('#chatImg').css('display', 'none')
// 		window.onbeforeprint = $('#projectHomeDiv');
//    		window.onafterprint = $('#projectHomeDiv');
		startPrint('.row.justify-content-center.spa')
		$('#chatImg').css('display', 'block')
	})

	var prtContent; // í”„ë¦°íŠ¸ í•˜ê³  ì‹¶ì€ ì˜ì—­
	var initBody;  // body ë‚´ìš© ì›ë³¸
	
	// í”„ë¦°íŠ¸í•˜ê³  ì‹¶ì€ ì˜ì—­ì˜ id ê°’ì„ í†µí•´ ì¶œë ¥ ì‹œì‘
	function startPrint (div_id) {
		prtContent = document.querySelector(div_id)
		window.onbeforeprint = beforePrint;
		window.onafterprint = afterPrint;
		window.print();
	}
	
	// ì›¹í˜ì´ì§€ body ë‚´ìš©ì„ í”„ë¦°íŠ¸í•˜ê³  ì‹¶ì€ ë‚´ìš©ìœ¼ë¡œ êµì²´
	function beforePrint(){
		initBody = document.body.innerHTML;
		document.body.innerHTML = prtContent.innerHTML;
	}
	
	// í”„ë¦°íŠ¸ í›„, ì›¹í˜ì´ì§€ body ë³µêµ¬
	function afterPrint(){
		document.body.innerHTML = initBody;
	}



	function printStateCnt() {
		/*  0: ì‘ì—…ëŒ€ê¸°(ë¯¸ë°°ì •ëœì‘ì—…)
		1:ì§„í–‰ì¤‘ (ë°°ì •ë¨)
		2:ìŠ¹ì¸ëŒ€ê¸°
		3:ìˆ˜ì •ìš”ì²­
		4:ìŠ¹ì¸ì™„ë£Œ (ì‘ì—…ì™„ë£Œ)
		 * */
		var ready = stateCnt(0)
		var going = stateCnt(1)
		var complete = stateCnt(4)
		$('#readyQuantiCnt').text(ready)
		$('#goingQuantiCnt').text(going)
		$('#completeQuantiCnt').text(complete)
		console.log("ì‘ì—…ëŒ€ê¸°: ", ready)
		console.log("ì§„í–‰ì¤‘: ", going)
		console.log("ì‘ì—…ì™„ë£Œ: ", complete)
	}

	//ìƒìœ„ì‘ì—…ì˜ ì´ ê°¯ìˆ˜ 
	function totalCnt(topworkVO) {
		$.ajax({
			url : "/proquanti/totalcnt",
			type : "post",
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'text',
			success : function(res) {
				console.log(res)
				$('#proQuantiTotalCnt').text(res)
			},
		});//ajax
	}

	//ì´ë¯¸ì§€ë‚˜ê°„ì‘ì—… ì´ê°¯ìˆ˜ 
	function deadWorkCnt(topworkVO) {
		$.ajax({
			url : "/proquanti/deadworkcnt",
			type : "post",
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				console.log("ë§ˆê°ì¼ì§€ë‚œ", res)
				$('#deadWorkCnt').text(res)
			},
		});//ajax
	}

	//ìƒíƒœë³„ ìƒìœ„ì‘ì—…ì˜ ê°¯ìˆ˜  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì¡°ê±´ë³„ ë‚˜ëˆ ì„œ ë¦¬í„´í•¨
	function stateCnt(stateCode) {
		var proNo = '103';
		var topworkVO = {
			proNo : proNo,
			topWorkState : stateCode
		}
		var cnt;
		$.ajax({
			url : "/proquanti/statecnt",
			type : "post",
			async : false,
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				cnt = res;
			},
		});//ajax
		return cnt;
	}

	// íŒ€ì›ë³„ í• ë‹¹ëœ ì‘ì—…ëŸ‰ 
	function myWorkCnt(topworkVO) {
		$.ajax({
			url : "/proquanti/myworkcnt",
			type : "post",
			async : false,
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				var categories = [];
				var data = [];
				var memberName = [];
				console.log("ì•„ì‘ìŠ¤ ë°˜í™˜ê°’ : ", res)
				for (var i = 0; i < res.length; i++) {
					memberName.push(getMemberDetail(res[i].memberId))
					categories.push(res[i].memberId)
					data.push(res[i].topWorkCnt*1)
				}
/*
				var options = {
					chart : {
						type : 'bar'
					},
					plotOptions : {
						bar : {
							distributed : true
						}
					},
					series : [ {
						name : 'ì‘ì—… ê°¯ìˆ˜',
						data : data
					} ],
					xaxis : {
						//íšŒì›ì•„ì´ë”” ë˜ëŠ” ì´ë¦„
						categories : memberName
					}
				}*/
			      
		        var options = {
					series:data,
					chart: {
					  width: 380,
					  type: 'donut',
					},
			        plotOptions: {
			          pie: {
			            startAngle:0,
			            endAngle: 360
			          }
			        },
			        dataLabels: {
			          enabled: true,
			        },
			        fill: {
			          type: 'gradient',
			        },
			        labels: memberName,
			        legend: {
			          formatter: function(val, opts) {
			        	  console.log(val)
			            return val + " - " + (opts.w.globals.series[opts.seriesIndex]/1)
						}
			        },
			        title: {
			          text: 'í• ë‹¹ëœ ì‘ì—…ëŸ‰'
			        },
			        responsive: [{
			          breakpoint: 480,
			          options: {
			            chart: {
			              width: 200
			            },
			            legend: {
			            	value: memberName,
			            	title : memberName,
			              position: 'bottom'
			            }
			          }
			        }]
		        
		        };

				var chart = new ApexCharts(document
						.querySelector("#myWorkCntChart"), options);
				chart.render();

			},
		});//ajax
	}
	// ì‘ì—…ë³„ ì§„í–‰ë„
	function totalWorkRate(topworkVO) {
		$.ajax({
			url : "/proquanti/totalworkrate",
			type : "post",
			async : false,
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				//ì‘ì—…ë²ˆí˜¸,íƒ€ì´í‹€, ì§„í–‰ë„
				var categories = [];
				var data = [];
				
				console.log("ì•„ì‘ìŠ¤ ë°˜í™˜ê°’ : ", res)
				for (var i = 0; i < res.length; i++) {
					categories.push(res[i].topWorkTitle)
					data.push(res[i].topWorkProgress)
				}
				console.log(categories)
				 var options = {
				          series: [{
				          name: 'ì‘ì—…ë³„ ì§„í–‰ë¥ ',
				          type: "column",
				          data: data,
				        },
				        {
				          name: 'ì „ì²´ ì§„í–‰ë¥ ',
				        	type: "line",
				        	data:data
				        }
				        ],
				          chart: { 
				          height: 350,
				          type: 'line',
				        },
				        stroke: {
				          width: [0, 4],
				          curve: 'smooth'
				        },
				        xaxis: {
// 				            type: 'datetime',
				            categories:categories ,
				        },
				        title: {
				          text: 'ì§„í–‰ë„',
				          align: 'left',
				          style: {
				            fontSize: "16px",
				            color: '#662'
				          }
				        },
// 				        fill: {
// 				          type: 'gradient',
// 				          gradient: {
// 				            shade: 'dark',
// 				            gradientToColors: [ '#FDD835'],
// 				            shadeIntensity: 1,
// 				            type: 'horizontal',
// 				            opacityFrom: 1,
// 				            opacityTo: 1,
// 				            stops: [0, 100, 100, 100]
// 				          },
// 				        },
						//ë¯¹ìŠ¤ì°¨íŠ¸ìš©
						plotOptions: {
							line:{
				            distributed: true,
							},
				          bar: {
				            distributed: true,
				            dataLabels: {
				              position: 'bottom',
				            }
				          }
				        },
				        color:[
				        	'#00000'
				        ],
				        yaxis: {
				          min: 0,
				          max: 100
				        }
				    };

				        var chart = new ApexCharts(document.querySelector("#totalWorkRate"), options);
				        chart.render();

			},
		});//ajax
	}
	
	//íŒ€ì›ë³„ ì§„í–‰ë„ 
	function myWorkRate(topworkVO) {

		$.ajax({
			url : "/proquanti/myworkrate",
			type : "post",
			async : false,
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				var categories = [];
				var data = [];
				var memberName = [];
				console.log("ì•„ì‘ìŠ¤ ë°˜í™˜ê°’ : ", res)
				for (var i = 0; i < res.length; i++) {
					memberName.push(getMemberDetail(res[i].memberId))
					categories.push(res[i].memberId)
					data.push(parseInt(res[i].topWorkRate))
				}
				var options = {
					chart : {
						type : "bar",
					},
					series : [{
						data : data,
					}],
					plotOptions: {
				          bar: {
				            distributed: true,
				            dataLabels: {
				              position: 'bottom',
				            }
				          }
				        },
			        xaxis: {
			            categories: memberName,
			        },
				    labels: memberName
				};

				var chart = new ApexCharts(document
						.querySelector("#myWorkRateChart"), options);

				chart.render();
			},
		});//ajax
	}
	
	//ë§ˆê°ì¼ ì„ë°•í•œ ì‘ì—…
	function deadlineWorkList(topworkVO){
	
		var table = $('#deadlineWorkList').DataTable({
			responsive:true,
			 retrieve: true,
//				 scrollX: true,
			scrollCollapse:true,
			 lengthMenu :  [ [5], [5] ],
			 bAutoWidth: false, //ìë™ë„ˆë¹„
// 			columns:[
// 				{data : "ì»¬ëŸ¼ëª…"},
// 				{data : "ì»¬ëŸ¼ëª…"},
// 			]
			language: {
	            emptyTable: "í……~",
	            lengthMenu: "_MENU_ ê°œì”© ë³´ê¸°",
	            info: "í˜„ì¬ _START_ - _END_ / _TOTAL_ê±´",
	            infoEmpty: "ë°ì´í„° ì—†ìŒ",
	            infoFiltered: "( _MAX_ê±´ì˜ ë°ì´í„°ì—ì„œ í•„í„°ë§ë¨ )",
	            search: "",
	            zeroRecords: "ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.",
	            loadingRecords: "ë¡œë”©ì¤‘...",
	            processing: "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.",
	            paginate: {
	              next: "ë‹¤ìŒ",
	              previous: "ì´ì „",
	            },
	          },
	            order: [ [ 3, "asc" ] ],
	            pageLength: 4,
		})
		table.clear().draw();
		
		/*ì‘ì—…ì´ë¦„
		ì§„í–‰ìƒíƒœ "0: ì‘ì—…ëŒ€ê¸°(ë¯¸ë°°ì •ëœì‘ì—…)		1:ì§„í–‰ì¤‘ (ë°°ì •ë¨)		2:ìŠ¹ì¸ëŒ€ê¸°		3:ìˆ˜ì •ìš”ì²­		4:ìŠ¹ì¸ì™„ë£Œ (ì‘ì—…ì™„ë£Œ)"
		ì§„í–‰ë„
		ì¢…ë£Œì¼
		ë‹´ë‹¹ì -- ë‹´ë‹¹ì ì¶œë ¥ë”°ë¡œ ë½‘ì•„ì•¼í•œë‹¤ë‹ˆ... ì¡°ì¸ì¡°ì¸*/
		$.ajax({
			url : "/proquanti/deadlinelist",
			type : "post",
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				for (var i = 0; i < res.length; i++) {
					table.row.add([
						`<td>\${res[i].topWorkTitle}</td>`,
						`<td>\${res[i].topWorkProgress}%</td>`,
						`<td>\${res[i].topWorkStart} </td>`,
						`<td><b>\${res[i].topWorkEnd}</b> </td>`,
						`<td> \${getMemberDetail(res[i].memberId)} </td>`
							]).draw(false);
				}
			},

		});//ajax
		
		
	}//deadlineWorkList
	
	//ìµœê·¼ ë°°ì •ëœ ì‘ì—… 
	function newRegiWorkList(topworkVO){

		var table = $('#newRegiWorkList').DataTable({
			responsive:true,
			 retrieve: true,
//				 scrollX: true,
			scrollCollapse:true,
			 lengthMenu :  [ [5], [5] ],
			 bAutoWidth: false, //ìë™ë„ˆë¹„
// 			columns:[
// 				{data : "ì»¬ëŸ¼ëª…"},
// 				{data : "ì»¬ëŸ¼ëª…"},
// 			]
			language: {
	            emptyTable: "í……~",
	            lengthMenu: "_MENU_ ê°œì”© ë³´ê¸°",
	            info: "í˜„ì¬ _START_ - _END_ / _TOTAL_ê±´",
	            infoEmpty: "ë°ì´í„° ì—†ìŒ",
	            infoFiltered: "( _MAX_ê±´ì˜ ë°ì´í„°ì—ì„œ í•„í„°ë§ë¨ )",
	            search: "",
	            zeroRecords: "ì¼ì¹˜í•˜ëŠ” ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.",
	            loadingRecords: "ë¡œë”©ì¤‘...",
	            processing: "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.",
	            paginate: {
	              next: "ë‹¤ìŒ",
	              previous: "ì´ì „",
	            },
	          },
	            order: [ [ 0, "desc" ] ],
	            pageLength: 4,
		})
		table.clear().draw();
		$.ajax({
			url : "/proquanti/newregiworklist",
			type : "post",
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				console.log("ìµœê·¼ë°°ì •:: ",res)
				var str = ""
				var workState ="";	
				//ì§„í–‰ìƒíƒœ "0: ì‘ì—…ëŒ€ê¸°(ë¯¸ë°°ì •ëœì‘ì—…)		1:ì§„í–‰ì¤‘ (ë°°ì •ë¨)		2:ìŠ¹ì¸ëŒ€ê¸°		3:ìˆ˜ì •ìš”ì²­		4:ìŠ¹ì¸ì™„ë£Œ (ì‘ì—…ì™„ë£Œ)"
				for (var i = 0; i < res.length; i++) {
						if (res[i].topWorkState == 0) {
							workState ="ì‘ì—…ëŒ€ê¸°";
						}else if(res[i].topWorkState == 1){
							workState ="ì§„í–‰ì¤‘";
						}else if(res[i].topWorkState == 2){
							workState ="ìŠ¹ì¸ëŒ€ê¸°";
						}else if(res[i].topWorkState == 3){
							workState ="ìˆ˜ì •ìš”ì²­";
						}else if(res[i].topWorkState == 4){
							workState ="ìŠ¹ì¸ì™„ë£Œ";
						}    
						table.row.add([
							`<td style="width :100px;">\${res[i].topWorkNo}</td>`,
							`<td>\${res[i].topWorkTitle}</td>`,
							`<td id ="workState\${i}"> \${workState} </td>`,
							`<td>\${res[i].topWorkProgress}%</td>`,
// 							`<td>\${res[i].topWorkStart} </td>`,
							`<td>\${res[i].topWorkEnd} </td>`,
							`<td> \${getMemberDetail(res[i].memberId)} </td>`
							]).draw(false);
						
					  //ì–´ì§¸ì„œ ìŠ¤ìœ„ì¹˜ë¬¸ì€ ë˜ì§€ì•ŠëŠ”ê°€.. 
// 						switch(res[i].topWorkState) {
// 						  case 0 :workState ="ì‘ì—…ëŒ€ê¸°";  
// 						  case 1:workState ="ì§„í–‰ì¤‘";
// 						  case 2:workState ="ìŠ¹ì¸ëŒ€ê¸°"; 
// 						  case 3:workState ="ìˆ˜ì •ìš”ì²­" ;
// 						  case 4:workState ="ìŠ¹ì¸ì™„ë£Œ" ;
// 						  default: workState ="í™•ì¸ë¶ˆê°€"
// 						}						
				}
			},

		});//ajax
		
		
	}//newRegiWorkList

	//íšŒì› ì´ë¦„ ê°€ì ¸ì˜¤ê¸°ìš© 
	function getMemberDetail(memberId) {
		var memberId = {
			memberId : memberId
		}
		var memberName;
		$.ajax({
			url : "/member/selectMember",
			type : "post",
			async : false,
			data : JSON.stringify(memberId),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				console.log(res)
				memberName = res.memberName
			},
		});//ajax
		return memberName;
	}
	
	//ë‹´ë‹¹ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° 
	function getDirector(topworkVO){
		var getDirector = [];
		$.ajax({
			url : "/proquanti/getdirector",
			type : "post",
			async : false,
			data : JSON.stringify(topworkVO),
			contentType : 'application/json; charset=utf-8',
			dataType : 'json',
			success : function(res) {
				console.log(res)
				getDirector = res
			},
		});//ajax
		return getDirector;
	}
	
	
</script>



